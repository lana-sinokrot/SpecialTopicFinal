{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\n\n// Admin credentials\nconst ADMIN_EMAIL = 'admin@htu.edu.jo';\nconst ADMIN_PASSWORD = 'Admin@123';\nconst register = async (firstName, lastName, email, password) => {\n  try {\n    const response = await axios.post(`${API_URL}/auth/register`, {\n      first_name: firstName,\n      last_name: lastName,\n      email,\n      password\n    });\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n};\nconst login = async (email, password) => {\n  try {\n    // Check for admin credentials first\n    if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {\n      const adminData = {\n        token: 'admin-token',\n        user_id: 'admin',\n        first_name: 'Admin',\n        last_name: 'User',\n        email: ADMIN_EMAIL\n      };\n      localStorage.setItem('user', JSON.stringify(adminData));\n      return adminData;\n    }\n\n    // If not admin, proceed with regular login\n    const response = await axios.post(`${API_URL}/auth/login`, {\n      email,\n      password\n    });\n    if (response.data.token) {\n      const userData = {\n        token: response.data.token,\n        user_id: response.data.user_id,\n        first_name: response.data.first_name,\n        last_name: response.data.last_name,\n        email: response.data.email\n      };\n      localStorage.setItem('user', JSON.stringify(userData));\n      return userData;\n    }\n  } catch (error) {\n    throw error;\n  }\n};\nconst logout = () => {\n  localStorage.removeItem('user');\n};\nconst getCurrentUser = () => {\n  const userStr = localStorage.getItem('user');\n  if (userStr) {\n    const user = JSON.parse(userStr);\n    // Check if the user is admin based on email\n    return {\n      ...user,\n      is_admin: user.email === ADMIN_EMAIL\n    };\n  }\n  return null;\n};\nconst updateCurrentUser = userData => {\n  const currentUser = getCurrentUser();\n  const updatedUser = {\n    ...currentUser,\n    ...userData\n  };\n  localStorage.setItem('user', JSON.stringify(updatedUser));\n  return updatedUser;\n};\nconst authService = {\n  login,\n  register,\n  logout,\n  getCurrentUser,\n  updateCurrentUser\n};\nexport default authService;","map":{"version":3,"names":["axios","API_URL","ADMIN_EMAIL","ADMIN_PASSWORD","register","firstName","lastName","email","password","response","post","first_name","last_name","data","error","login","adminData","token","user_id","localStorage","setItem","JSON","stringify","userData","logout","removeItem","getCurrentUser","userStr","getItem","user","parse","is_admin","updateCurrentUser","currentUser","updatedUser","authService"],"sources":["C:/Users/Lana Sinokrot/Desktop/Test-test/frontend/src/services/auth.service.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Admin credentials\r\nconst ADMIN_EMAIL = 'admin@htu.edu.jo';\r\nconst ADMIN_PASSWORD = 'Admin@123';\r\n\r\nconst register = async (firstName, lastName, email, password) => {\r\n  try {\r\n    const response = await axios.post(`${API_URL}/auth/register`, {\r\n      first_name: firstName,\r\n      last_name: lastName,\r\n      email,\r\n      password,\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst login = async (email, password) => {\r\n  try {\r\n    // Check for admin credentials first\r\n    if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {\r\n      const adminData = {\r\n        token: 'admin-token',\r\n        user_id: 'admin',\r\n        first_name: 'Admin',\r\n        last_name: 'User',\r\n        email: ADMIN_EMAIL\r\n      };\r\n      localStorage.setItem('user', JSON.stringify(adminData));\r\n      return adminData;\r\n    }\r\n\r\n    // If not admin, proceed with regular login\r\n    const response = await axios.post(`${API_URL}/auth/login`, {\r\n      email,\r\n      password,\r\n    });\r\n\r\n    if (response.data.token) {\r\n      const userData = {\r\n        token: response.data.token,\r\n        user_id: response.data.user_id,\r\n        first_name: response.data.first_name,\r\n        last_name: response.data.last_name,\r\n        email: response.data.email\r\n      };\r\n      localStorage.setItem('user', JSON.stringify(userData));\r\n      return userData;\r\n    }\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem('user');\r\n};\r\n\r\nconst getCurrentUser = () => {\r\n  const userStr = localStorage.getItem('user');\r\n  if (userStr) {\r\n    const user = JSON.parse(userStr);\r\n    // Check if the user is admin based on email\r\n    return {\r\n      ...user,\r\n      is_admin: user.email === ADMIN_EMAIL\r\n    };\r\n  }\r\n  return null;\r\n};\r\n\r\nconst updateCurrentUser = (userData) => {\r\n  const currentUser = getCurrentUser();\r\n  const updatedUser = { ...currentUser, ...userData };\r\n  localStorage.setItem('user', JSON.stringify(updatedUser));\r\n  return updatedUser;\r\n};\r\n\r\nconst authService = {\r\n  login,\r\n  register,\r\n  logout,\r\n  getCurrentUser,\r\n  updateCurrentUser\r\n};\r\n\r\nexport default authService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}